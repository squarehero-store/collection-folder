document.addEventListener("DOMContentLoaded",function(){function e(e,t,n=!1){t.forEach(t=>{const a=document.createElement("div");a.classList.add("header-nav-folder-item","header-nav-folder-item--external");const d=document.createElement("a");d.href=t.fullUrl,d.textContent=t.title,n&&d.setAttribute("tabindex","0"),a.appendChild(d),e.appendChild(a)})}function t(e,t){t.forEach(t=>{const n=document.createElement("div");n.classList.add("container","header-menu-nav-item","header-menu-nav-item--external");const a=document.createElement("a");a.href=t.fullUrl,a.textContent=t.title,a.setAttribute("tabindex","0"),n.appendChild(a),e.appendChild(n)})}function n(){document.querySelectorAll(".header-menu-nav-item .header-nav-folder-content").forEach(e=>{e.remove()})}function a(n){fetch(`/${n}?format=json`).then(e=>e.json()).then(a=>{const d=a.items;if(d&&d.length>0){const a=document.querySelector(`.header-nav-item a[href="/${n}"]`).parentElement;if(a&&!a.classList.contains("header-nav-item--folder")){a.classList.add("header-nav-item--folder"),a.querySelector("a").classList.add("header-nav-folder-title");const t=document.createElement("div");t.classList.add("header-nav-folder-content"),a.appendChild(t),e(t,d)}const r=document.querySelector(".header-menu-nav-wrapper");if(r){const e=r.querySelector(`.header-menu-nav-item--collection a[href="/${n}"]`);let a=null;e&&(a=Array.from(r.children).indexOf(e.parentElement),e.parentElement.remove());const c=document.createElement("div");c.classList.add("container","header-menu-nav-item");const o=document.createElement("a");o.setAttribute("data-folder-id",`/${n}`),o.href=`/${n}`;const l=document.createElement("div");l.classList.add("header-menu-nav-item-content");const i=document.createElement("span");i.classList.add("visually-hidden"),i.textContent="Folder:";const s=document.createElement("span");s.textContent=n.charAt(0).toUpperCase()+n.slice(1);const m=document.createElement("span");m.classList.add("chevron","chevron--right"),l.appendChild(i),l.appendChild(s),l.appendChild(m),o.appendChild(l),c.appendChild(o);const h=document.createElement("div");h.classList.add("header-nav-folder-content"),c.appendChild(h),t(h,d),null!==a?r.insertBefore(c,r.children[a]):r.appendChild(c)}const c=document.querySelector(".header-menu-nav-list");if(c){const e=document.createElement("div");e.setAttribute("data-folder",`/${n}`),e.classList.add("header-menu-nav-folder","header-menu-nav-folder--active");const a=document.createElement("div");a.classList.add("header-menu-nav-folder-content");const r=document.createElement("div");r.classList.add("header-menu-controls","container","header-menu-nav-item");const o=document.createElement("a");o.classList.add("header-menu-controls-control","header-menu-controls-control--active"),o.setAttribute("data-action","back"),o.href="/",o.tabIndex="0";const l=document.createElement("span");l.classList.add("chevron","chevron--left");const i=document.createElement("span");i.textContent="Back",o.appendChild(l),o.appendChild(i),r.appendChild(o),a.appendChild(r),t(a,d);const s=document.createElement("div");s.setAttribute("data-folder",`/${n}`),s.classList.add("header-menu-nav-folder","header-menu-nav-folder--active"),s.appendChild(a),c.appendChild(s)}}}).catch(e=>{console.error(`Error fetching ${n} data:`,e)})}const d=document.querySelector('meta[squarehero-plugin="collection-folder"]');if(d){const e=d.getAttribute("enabled");if("true"===e){const e=d.getAttribute("target").split(",");e.forEach(e=>{a(e.trim())})}}window.addEventListener("load",n)});